import clsx from "clsx";
import DeliveryStutus from "../deliveries/status";
import { usePathname, useSearchParams, useRouter } from "next/navigation";
function DeliveryBox({ index, selected, setSelected }) {
  const searchParams = useSearchParams();
  const pathname = usePathname();
  const { replace } = useRouter();

  const handleBoxClick = () => {
    setSelected(index);
    const params = new URLSearchParams(searchParams);
    params.set("deliveryid", index);
    replace(`${pathname}?${params.toString()}`);
  };

  return (
    <div
      onClick={handleBoxClick}
      className={clsx(
        "p-4 mt-4 cursor-pointer text-[#3C3C3C] rounded-3xl bg-white border-[1px] border-solid ",
        {
          "border-[#F4F2F2]": searchParams.get("deliveryid") != index,
          "border-[#2080e2]":
            searchParams.get("deliveryid") == index ||
            (index == 0 && !searchParams.has("deliveryid")),
        }
      )}
    >
      <div className="flex gap-3 justify-between h-fit">
        <div className="flex items-center h-fit gap-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd "
              d="M4.70377 2.13859C4.70377 1.87157 7.86378 0 11.0014 0C14.139 0 17.299 1.87157 17.299 2.13859C17.299 3.09179 17.1829 3.65638 17.0849 3.96373C17.0198 4.16536 16.8036 4.27718 16.5636 4.27718H5.4392C5.19919 4.27718 4.98297 4.16536 4.91789 3.96373C4.81993 3.65638 4.70377 3.09179 4.70377 2.13859ZM9.95179 1.83308C9.76621 1.83308 9.58823 1.89745 9.45701 2.01204C9.32578 2.12663 9.25206 2.28205 9.25206 2.4441C9.25206 2.60616 9.32578 2.76158 9.45701 2.87616C9.58823 2.99075 9.76621 3.05513 9.95179 3.05513H12.051C12.2366 3.05513 12.4146 2.99075 12.5458 2.87616C12.677 2.76158 12.7507 2.60616 12.7507 2.4441C12.7507 2.28205 12.677 2.12663 12.5458 2.01204C12.4146 1.89745 12.2366 1.83308 12.051 1.83308H9.95179ZM5.4301 8.07654C3.09998 7.44719 3.68775 6.3229 4.57642 5.49923H17.6209C18.3318 6.29235 18.7132 7.36225 16.5643 8.00261C16.6521 8.6833 16.5752 9.37252 16.3383 10.0256C16.1015 10.6786 15.7102 11.2809 15.1897 11.7934C14.6692 12.3059 14.0311 12.7171 13.3169 13.0004C12.6027 13.2837 11.8283 13.4328 11.0438 13.438C10.2594 13.4432 9.48248 13.3043 8.76345 13.0304C8.04443 12.7565 7.39935 12.3537 6.87005 11.8482C6.34075 11.3426 5.93904 10.7455 5.69098 10.0957C5.44291 9.44583 5.35403 8.75771 5.4301 8.07593M10.8111 8.55375C12.6598 8.55375 14.0928 8.46821 15.1914 8.31912C15.2275 8.8173 15.1468 9.31667 14.9541 9.78663C14.7613 10.2566 14.4608 10.6872 14.0707 11.0522C13.6807 11.4171 13.2094 11.7086 12.6858 11.9089C12.1622 12.1092 11.5972 12.2139 11.0256 12.2168C10.4539 12.2197 9.88764 12.1206 9.36141 11.9256C8.83518 11.7306 8.36009 11.4438 7.96526 11.0829C7.57044 10.7219 7.26419 10.2943 7.06529 9.8263C6.8664 9.35832 6.77904 8.85979 6.80858 8.36128C7.83229 8.48471 9.1443 8.55375 10.8111 8.55375ZM16.8911 17.4753C16.2581 16.6131 15.387 15.9037 14.3577 15.4125C13.3285 14.9213 12.1743 14.6641 11.0014 14.6646C9.82801 14.664 8.6733 14.9212 7.64366 15.4126C6.61403 15.904 5.74258 16.6138 5.10962 17.4766C4.8747 17.1606 4.51392 16.932 4.0971 16.835L2.74521 16.5191C2.29712 16.4142 1.81967 16.469 1.41787 16.6715C1.01606 16.874 0.722811 17.2075 0.602616 17.5988L0.0596206 19.3695C0.00015144 19.5633 -0.015022 19.7654 0.0149669 19.9643C0.0449558 20.1632 0.11952 20.355 0.234401 20.5288C0.349281 20.7025 0.502228 20.8548 0.684508 20.9769C0.866788 21.099 1.07483 21.1886 1.29675 21.2405L2.64795 21.557C2.87522 21.6105 3.11254 21.6232 3.3456 21.5944C3.57866 21.5656 3.80264 21.496 4.00404 21.3896C4.00459 21.5516 4.07885 21.7069 4.21047 21.8211C4.34209 21.9353 4.52029 21.9993 4.70587 21.9988C4.89145 21.9983 5.06921 21.9334 5.20005 21.8185C5.33088 21.7036 5.40407 21.548 5.40351 21.3859V20.7749C5.40351 20.5421 5.4224 20.313 5.45809 20.0887L9.09952 20.9411C9.26855 21.257 9.53727 21.5243 9.87414 21.7115C10.211 21.8988 10.6021 21.9983 11.0014 21.9983C11.4007 21.9983 11.7918 21.8988 12.1287 21.7115C12.4655 21.5243 12.7343 21.257 12.9033 20.9411L16.5447 20.0887C16.5804 20.313 16.5993 20.5421 16.5993 20.7749V21.3859C16.5984 21.548 16.6712 21.7037 16.8018 21.8189C16.9323 21.934 17.1099 21.9992 17.2955 22C17.4811 22.0008 17.6595 21.9372 17.7913 21.8232C17.9232 21.7092 17.9978 21.5541 17.9988 21.392C18.3906 21.5973 18.8748 21.6688 19.3514 21.557L20.7032 21.2411C20.9252 21.1892 21.1332 21.0996 21.3155 20.9775C21.4978 20.8554 21.6507 20.7031 21.7656 20.5294C21.8805 20.3556 21.955 20.1638 21.985 19.9649C22.015 19.766 21.9998 19.5639 21.9404 19.3701L21.3967 17.5994C21.2765 17.2081 20.9832 16.8746 20.5814 16.6721C20.1796 16.4696 19.7022 16.4148 19.2541 16.5197L17.9022 16.8356C17.4863 16.9323 17.1262 17.1606 16.8911 17.4753ZM5.82545 18.9088C6.20354 18.1107 6.81684 17.4141 7.60303 16.89C8.38923 16.3658 9.32031 16.0327 10.3017 15.9246V18.4353C9.98808 18.5324 9.70534 18.6931 9.47666 18.9041C9.24798 19.1152 9.07988 19.3706 8.98616 19.6494L5.82545 18.9088ZM16.1773 18.9088C15.7992 18.1107 15.1859 17.4142 14.3997 16.89C13.6135 16.3659 12.6825 16.0328 11.7011 15.9246V18.4353C12.3337 18.6308 12.8277 19.083 13.0166 19.6494L16.1773 18.9088ZM11.0014 20.7749C11.187 20.7749 11.365 20.7105 11.4962 20.5959C11.6274 20.4813 11.7011 20.3259 11.7011 20.1639C11.7011 20.0018 11.6274 19.8464 11.4962 19.7318C11.365 19.6172 11.187 19.5528 11.0014 19.5528C10.8158 19.5528 10.6378 19.6172 10.5066 19.7318C10.3754 19.8464 10.3017 20.0018 10.3017 20.1639C10.3017 20.3259 10.3754 20.4813 10.5066 20.5959C10.6378 20.7105 10.8158 20.7749 11.0014 20.7749Z"
              fill="#3C3C3C"
            />
          </svg>
          <p className="font-semibold text-sm text-nowrap">bilal</p>
        </div>
        <div className="order-id text-sm flex flex-col align-center ">
          <p className=" font-semibold text-nowrap">Order ID</p>
          <p className="">1002</p>
        </div>
      </div>
      <div className="flex gap-3 justify-between h-fit">
        <div className="flex flex-col gap-2">
          <div className="flex items-center gap-2">
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10.8333 3.3335C11.0543 3.3335 11.2663 3.42129 11.4225 3.57757C11.5788 3.73385 11.6666 3.94582 11.6666 4.16683H15C15.1254 4.16683 15.2493 4.19516 15.3622 4.2497C15.4752 4.30425 15.5744 4.38359 15.6525 4.48183L15.7141 4.57183L18.2141 8.7385L18.26 8.82433L18.2933 8.9135L18.3175 9.00433L18.3308 9.096L18.3333 9.16683V14.1668C18.3333 14.3878 18.2455 14.5998 18.0892 14.7561C17.9329 14.9124 17.721 15.0002 17.5 15.0002H16.5241C16.3516 15.4875 16.0323 15.9095 15.6101 16.2079C15.1879 16.5063 14.6836 16.6665 14.1666 16.6665C13.6496 16.6665 13.1453 16.5063 12.7231 16.2079C12.301 15.9095 11.9816 15.4875 11.8091 15.0002H8.19079C8.01828 15.4875 7.69896 15.9095 7.27677 16.2079C6.85459 16.5063 6.35029 16.6665 5.83329 16.6665C5.31629 16.6665 4.812 16.5063 4.38981 16.2079C3.96763 15.9095 3.64831 15.4875 3.47579 15.0002H2.49996C2.27895 15.0002 2.06698 14.9124 1.9107 14.7561C1.75442 14.5998 1.66663 14.3878 1.66663 14.1668V5.00016C1.66663 4.55814 1.84222 4.13421 2.15478 3.82165C2.46734 3.50909 2.89127 3.3335 3.33329 3.3335H10.8333ZM5.83329 13.3335C5.61228 13.3335 5.40032 13.4213 5.24404 13.5776C5.08776 13.7339 4.99996 13.9458 4.99996 14.1668C4.99996 14.3878 5.08776 14.5998 5.24404 14.7561C5.40032 14.9124 5.61228 15.0002 5.83329 15.0002C6.05431 15.0002 6.26627 14.9124 6.42255 14.7561C6.57883 14.5998 6.66663 14.3878 6.66663 14.1668C6.66663 13.9458 6.57883 13.7339 6.42255 13.5776C6.26627 13.4213 6.05431 13.3335 5.83329 13.3335ZM14.1666 13.3335C13.9456 13.3335 13.7336 13.4213 13.5774 13.5776C13.4211 13.7339 13.3333 13.9458 13.3333 14.1668C13.3333 14.3878 13.4211 14.5998 13.5774 14.7561C13.7336 14.9124 13.9456 15.0002 14.1666 15.0002C14.3876 15.0002 14.5996 14.9124 14.7559 14.7561C14.9122 14.5998 15 14.3878 15 14.1668C15 13.9458 14.9122 13.7339 14.7559 13.5776C14.5996 13.4213 14.3876 13.3335 14.1666 13.3335ZM14.5283 5.8335H11.6666V8.3335H16.0283L14.5283 5.8335Z"
                fill="#3C3C3C"
              />
            </svg>
            <p className="text-xs">LPT-987</p>
          </div>
          <div className="flex flex-col gap-2">
            <div className="flex items-center gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M6.66675 14.1666H8.33341V13.3333H9.16675C9.62508 13.3333 10.0001 12.9583 10.0001 12.4999V9.99992C10.0001 9.54158 9.62508 9.16658 9.16675 9.16658H6.66675V8.33325H10.0001V6.66659H8.33341V5.83325H6.66675V6.66659H5.83341C5.37508 6.66659 5.00008 7.04159 5.00008 7.49992V9.99992C5.00008 10.4583 5.37508 10.8333 5.83341 10.8333H8.33341V11.6666H5.00008V13.3333H6.66675V14.1666ZM16.6667 3.33325H3.33341C2.40841 3.33325 1.67508 4.07492 1.67508 4.99992L1.66675 14.9999C1.66675 15.9249 2.40841 16.6666 3.33341 16.6666H16.6667C17.5917 16.6666 18.3334 15.9249 18.3334 14.9999V4.99992C18.3334 4.07492 17.5917 3.33325 16.6667 3.33325ZM16.6667 14.9999H3.33341V4.99992H16.6667V14.9999ZM11.6667 8.33325L13.3334 6.66659L15.0001 8.33325M15.0001 11.8749L13.3334 13.5416L11.6667 11.8749"
                  fill="black"
                />
              </svg>
              <p className="text-xs">3500 da</p>
            </div>
          </div>
        </div>
        <div className=" mt-auto">
          <DeliveryStutus
            status={
              ["completed", "pending", "In-Transit", "canceled"][index % 4]
            }
          />
        </div>
      </div>
    </div>
  );
}

export default DeliveryBox;
